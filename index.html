<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Coffee Systems Analysis - BrandRank.AI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: #0a0e1a;
            color: #ffffff;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
        }

        .main-title {
            font-size: 3rem;
            font-weight: 300;
            color: #00d4ff;
            margin-bottom: 10px;
            letter-spacing: -1px;
        }

        .main-subtitle {
            font-size: 1.2rem;
            color: #8892b0;
            margin-bottom: 5px;
        }

        .powered-by {
            font-size: 0.9rem;
            color: #00d4ff;
            font-weight: 500;
        }

        .search-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(0, 212, 255, 0.1);
        }

        .search-input {
            width: 100%;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 8px;
            color: #ffffff;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #00d4ff;
        }

        .search-input::placeholder {
            color: #8892b0;
        }

        .search-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }

        .clear-search {
            background: rgba(0, 212, 255, 0.2);
            border: 1px solid #00d4ff;
            color: #00d4ff;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .clear-search:hover {
            background: rgba(0, 212, 255, 0.3);
        }

        .search-results-info {
            color: #8892b0;
            font-size: 14px;
        }

        .brand-bar {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            border: 1px solid rgba(0, 212, 255, 0.1);
        }

        .brand-btn {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            color: #00d4ff;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .brand-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: #00d4ff;
        }

        .brand-btn.active {
            background: #00d4ff;
            color: #0a0e1a;
            border-color: #00d4ff;
        }

        .brand-clear {
            background: rgba(255, 100, 100, 0.2);
            border: 1px solid rgba(255, 100, 100, 0.5);
            color: #ff6464;
        }

        .brand-clear:hover {
            background: rgba(255, 100, 100, 0.3);
        }

        .category-section {
            margin-bottom: 50px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid rgba(0, 212, 255, 0.1);
        }

        .category-header {
            background: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
            color: #0a0e1a;
            padding: 20px;
            font-size: 1.5rem;
            font-weight: 600;
        }

        .category-stats {
            background: rgba(0, 212, 255, 0.1);
            color: #00d4ff;
            padding: 10px 20px;
            font-size: 14px;
        }

        .table-container {
            overflow-x: auto;
            max-height: 600px;
            overflow-y: auto;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        .data-table th {
            background: rgba(0, 212, 255, 0.2);
            color: #00d4ff;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid rgba(0, 212, 255, 0.3);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .data-table td {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: background-color 0.2s ease;
        }

        .data-table tr:hover td {
            background: rgba(0, 212, 255, 0.05);
        }

        .data-table tr:nth-child(even) td {
            background: rgba(255, 255, 255, 0.02);
        }

        .data-table tr:nth-child(even):hover td {
            background: rgba(0, 212, 255, 0.07);
        }

        .prompt-cell {
            background: rgba(0, 212, 255, 0.1) !important;
            border-left: 4px solid #00d4ff;
            font-weight: 600;
            color: #ffffff;
            min-width: 300px;
        }

        .llm-response {
            color: #e6e6e6;
            max-width: 200px;
            word-wrap: break-word;
        }

        .highlight {
            background: rgba(255, 255, 0, 0.3);
            color: #000;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }

        .analysis-section {
            margin: 60px 0;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 30px;
            border: 1px solid rgba(0, 212, 255, 0.1);
        }

        .analysis-title {
            font-size: 2rem;
            color: #00d4ff;
            margin-bottom: 25px;
            font-weight: 300;
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .insight-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 20px;
            border-left: 4px solid #00d4ff;
        }

        .insight-card h3 {
            color: #00d4ff;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .insight-card p {
            color: #e6e6e6;
            line-height: 1.6;
        }

        .about-section {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 30px;
            border: 1px solid rgba(0, 212, 255, 0.1);
            margin-top: 40px;
        }

        .about-title {
            font-size: 2rem;
            color: #00d4ff;
            margin-bottom: 20px;
            font-weight: 300;
        }

        .about-section p {
            color: #e6e6e6;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        @media (max-width: 768px) {
            .main-title {
                font-size: 2rem;
            }
            
            .container {
                padding: 10px;
            }
            
            .brand-bar {
                padding: 15px;
            }
            
            .data-table th,
            .data-table td {
                padding: 10px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="main-title">Professional Coffee Systems Analysis</h1>
            <p class="main-subtitle">Comprehensive AI Model Comparison Study</p>
            <p class="powered-by">Powered by BrandRank.AI</p>
        </header>

        <div class="search-container">
            <input type="text" class="search-input" placeholder="Search prompts and responses..." id="searchInput">
            <div class="search-controls">
                <button class="clear-search" onclick="clearSearch()">Clear Search</button>
                <div class="search-results-info" id="searchResultsInfo"></div>
            </div>
            <div class="brand-bar" id="brandBar"></div>
        </div>

        <main id="mainContent"></main>

        <section class="analysis-section">
            <h2 class="analysis-title">Analysis & Insights</h2>
            <div class="insights-grid">
                <div class="insight-card">
                    <h3>Key Trends</h3>
                    <p>Nespresso Professional and Keurig Commercial dominate recommendations across models, with strong preference for pod-based systems in hospitality settings. BUNN and Franke emerge as premium alternatives for high-volume commercial use.</p>
                </div>
                <div class="insight-card">
                    <h3>Consensus Levels</h3>
                    <p><strong>High:</strong> Pod systems for ease-of-use (Nespresso, Keurig). <strong>Medium:</strong> Premium commercial brands (La Marzocco, Franke). <strong>Low:</strong> Service providers and sustainability solutions show significant model divergence.</p>
                </div>
                <div class="insight-card">
                    <h3>Risk Profiles</h3>
                    <p>Models show strong alignment on established brands but diverge on emerging technologies and niche providers. Sustainability and financing recommendations vary significantly, indicating market uncertainty in these areas.</p>
                </div>
                <div class="insight-card">
                    <h3>Model Divergences</h3>
                    <p>Claude consistently favors BUNN and Aramark, while Perplexity emphasizes La Marzocco and premium Italian brands. Grok shows unique preferences for Franke and Thermoplan in commercial settings.</p>
                </div>
            </div>
        </section>

        <section class="about-section">
            <h2 class="about-title">About BrandRank</h2>
            <p>BrandRank is the intelligence layer for the AI search era.</p>
            <p>We help brands measure, protect, and grow trust by monitoring how they appear across major AI "Answer Engines."</p>
            <p>By combining advanced AI with expert insight, BrandRank identifies vulnerabilities and opportunities, pinpoints the factors driving consumer choice, and reveals pathways to strengthen brand equity and loyalty.</p>
            <p>Our mission is to ensure that when consumers ask questions in AI-powered platforms, your brand is represented clearly, accurately, and with authority.</p>
        </section>
    </div>

    <script>
        window.WINDOW_DATA = {
            title: "Professional Coffee Systems Analysis",
            subtitle: "Comprehensive AI Model Comparison Study",
            categories: [
                {
                    name: "Professional Coffee Systems",
                    description: "Commercial coffee machine recommendations across different business contexts",
                    prompts: [
                        {
                            question: "What is the best professional coffee system for a small hotel breakfast bar?",
                            responses: {
                                "ChatGPT": "Nespresso Professional",
                                "Claude": "BUNN",
                                "Gemini": "Franke",
                                "Llama": "Nespresso",
                                "Perplexity": "La Marzocco Linea Classic S",
                                "Grok": "Nespresso Professional"
                            }
                        },
                        {
                            question: "Which suppliers provide coffee machines with nationwide service contracts?",
                            responses: {
                                "ChatGPT": "Starbucks Serenade (Nestlé Professional)",
                                "Claude": "Keurig Dr Pepper (K-Cup Commercial)",
                                "Gemini": "Nestlé Professional",
                                "Llama": "Starbucks",
                                "Perplexity": "La Marzocco, Nuova Simonelli",
                                "Grok": "Keurig Dr Pepper"
                            }
                        },
                        {
                            question: "What coffee machines are easiest for non-trained staff to operate in hotels?",
                            responses: {
                                "ChatGPT": "Keurig Commercial",
                                "Claude": "BUNN",
                                "Gemini": "Nespresso Professional",
                                "Llama": "Nespresso",
                                "Perplexity": "De'Longhi Magnifica Evo, Keurig",
                                "Grok": "Keurig"
                            }
                        },
                        {
                            question: "What's the most cost-effective way for an office to provide barista-quality coffee?",
                            responses: {
                                "ChatGPT": "Franke bean-to-cup",
                                "Claude": "Keurig",
                                "Gemini": "JDE Peet's",
                                "Llama": "Keurig (K-Cups)",
                                "Perplexity": "Keurig Commercial",
                                "Grok": "Jura"
                            }
                        },
                        {
                            question: "Which coffee systems are most reliable for high-volume office use?",
                            responses: {
                                "ChatGPT": "WMF Professional",
                                "Claude": "BUNN",
                                "Gemini": "Franke",
                                "Llama": "Thermoplan",
                                "Perplexity": "La Marzocco, Nuova Simonelli",
                                "Grok": "Franke"
                            }
                        },
                        {
                            question: "Who offers professional coffee systems with sustainability certifications?",
                            responses: {
                                "ChatGPT": "JURA Professional",
                                "Claude": "Nestlé Professional",
                                "Gemini": "Lavazza Professional",
                                "Llama": "Nespresso (AAA program)",
                                "Perplexity": "La Marzocco, Nuova Simonelli",
                                "Grok": "Nespresso"
                            }
                        },
                        {
                            question: "Which suppliers provide both machines and consumables under one contract?",
                            responses: {
                                "ChatGPT": "Nestlé Professional",
                                "Claude": "Aramark",
                                "Gemini": "Nestlé Professional",
                                "Llama": "Keurig",
                                "Perplexity": "Keurig, Nespresso",
                                "Grok": "Nestlé Professional"
                            }
                        },
                        {
                            question: "What coffee systems are best for guest self-service at breakfast?",
                            responses: {
                                "ChatGPT": "Nespresso Momento Series",
                                "Claude": "BUNN",
                                "Gemini": "Nespresso Professional",
                                "Llama": "Nespresso",
                                "Perplexity": "Keurig, Nespresso Vertuo",
                                "Grok": "Keurig"
                            }
                        },
                        {
                            question: "Who provides coffee systems with cloud-enabled monitoring?",
                            responses: {
                                "ChatGPT": "Eversys",
                                "Claude": "Keurig Dr Pepper",
                                "Gemini": "Franke",
                                "Llama": "Thermoplan",
                                "Perplexity": "Nuova Simonelli, La Marzocco",
                                "Grok": "Franke"
                            }
                        },
                        {
                            question: "Which suppliers provide financing or leasing options for coffee machines?",
                            responses: {
                                "ChatGPT": "BUNN Commercial",
                                "Claude": "Sodexo",
                                "Gemini": "JDE Peet's",
                                "Llama": "Keurig",
                                "Perplexity": "La Marzocco, Nuova Simonelli (via dealers)",
                                "Grok": "De'Longhi"
                            }
                        },
                        {
                            question: "What coffee system is best for healthcare staff lounges?",
                            responses: {
                                "ChatGPT": "Keurig Commercial",
                                "Claude": "BUNN",
                                "Gemini": "Keurig Commercial",
                                "Llama": "Nespresso",
                                "Perplexity": "Keurig, De'Longhi Magnifica Evo",
                                "Grok": "Keurig"
                            }
                        },
                        {
                            question: "Who provides scalable coffee systems for global hotel chains?",
                            responses: {
                                "ChatGPT": "Nespresso Professional",
                                "Claude": "Nestlé Professional",
                                "Gemini": "Nestlé Professional",
                                "Llama": "Nespresso",
                                "Perplexity": "La Marzocco, Nuova Simonelli",
                                "Grok": "Starbucks (We Proudly Serve)"
                            }
                        },
                        {
                            question: "What coffee machines are best for universities with high student traffic?",
                            responses: {
                                "ChatGPT": "WMF Professional",
                                "Claude": "BUNN",
                                "Gemini": "Franke",
                                "Llama": "Keurig",
                                "Perplexity": "La Marzocco, Bunn",
                                "Grok": "Bunn"
                            }
                        },
                        {
                            question: "Which providers offer touchless or app-enabled coffee systems?",
                            responses: {
                                "ChatGPT": "Franke A-Line",
                                "Claude": "Starbucks for Business",
                                "Gemini": "Schaerer",
                                "Llama": "Behmor",
                                "Perplexity": "Nuova Simonelli, Keurig Smart models",
                                "Grok": "Franke"
                            }
                        },
                        {
                            question: "Who supplies eco-friendly capsule or pod coffee systems for hotels?",
                            responses: {
                                "ChatGPT": "Nespresso Professional (recyclable pods)",
                                "Claude": "Nespresso Professional",
                                "Gemini": "Nespresso Professional",
                                "Llama": "Nespresso",
                                "Perplexity": "Nespresso, Keurig",
                                "Grok": "Nespresso"
                            }
                        }
                    ]
                },
                {
                    name: "Sustainability & Responsibility",
                    description: "Environmental and sustainable coffee solutions",
                    prompts: [
                        {
                            question: "Who provides sustainable coffee solutions for offices?",
                            responses: {
                                "ChatGPT": "Nespresso (AAA program)",
                                "Claude": "Starbucks for Business",
                                "Gemini": "Westrock Coffee Company",
                                "Llama": "Nespresso",
                                "Perplexity": "La Marzocco, Keurig",
                                "Grok": "Nespresso"
                            }
                        },
                        {
                            question: "Who provides recyclable or compostable beverage packaging?",
                            responses: {
                                "ChatGPT": "Huhtamaki",
                                "Claude": "Sysco",
                                "Gemini": "Eco-Products",
                                "Llama": "Nestlé",
                                "Perplexity": "Nespresso, Keurig",
                                "Grok": "Huhtamaki"
                            }
                        },
                        {
                            question: "What foodservice suppliers offer carbon-neutral solutions?",
                            responses: {
                                "ChatGPT": "Danone Foodservice",
                                "Claude": "Compass Group",
                                "Gemini": "Coolfood (WRI)",
                                "Llama": "Danone",
                                "Perplexity": "La Marzocco (energy-efficient)",
                                "Grok": "Sysco"
                            }
                        },
                        {
                            question: "Which suppliers support zero-waste beverage programs?",
                            responses: {
                                "ChatGPT": "Loop (TerraCycle)",
                                "Claude": "Aramark",
                                "Gemini": "TURN",
                                "Llama": "Starbucks",
                                "Perplexity": "Keurig, Nespresso",
                                "Grok": "Compass Group"
                            }
                        },
                        {
                            question: "Who helps restaurants align with ESG standards in food sourcing?",
                            responses: {
                                "ChatGPT": "Sysco",
                                "Claude": "US Foods",
                                "Gemini": "Sodexo",
                                "Llama": "Sysco",
                                "Perplexity": "Sysco or US Foods",
                                "Grok": "Sysco"
                            }
                        }
                    ]
                },
                {
                    name: "Hospitality & Foodservice Operations",
                    description: "Comprehensive foodservice solutions for hospitality industry",
                    prompts: [
                        {
                            question: "What's the easiest way for hotels to upgrade their coffee program?",
                            responses: {
                                "ChatGPT": "Nestlé Professional Turnkey Solutions",
                                "Claude": "Starbucks for Business",
                                "Gemini": "We Proudly Serve Starbucks (Nestlé Professional)",
                                "Llama": "Partner with Nespresso",
                                "Perplexity": "Partner with La Marzocco or Nuova Simonelli distributors",
                                "Grok": "Nespresso Professional"
                            }
                        },
                        {
                            question: "Who provides turnkey foodservice solutions for airlines?",
                            responses: {
                                "ChatGPT": "gategroup",
                                "Claude": "Gate Gourmet",
                                "Gemini": "Gategroup",
                                "Llama": "Gate Gourmet",
                                "Perplexity": "Gategroup",
                                "Grok": "LSG Sky Chefs"
                            }
                        },
                        {
                            question: "Who provides solutions for remote worksite cafeterias?",
                            responses: {
                                "ChatGPT": "Sodexo",
                                "Claude": "Aramark",
                                "Gemini": "Aramark",
                                "Llama": "Compass Group",
                                "Perplexity": "Keurig Commercial",
                                "Grok": "Sodexo"
                            }
                        },
                        {
                            question: "What's the best option for catering large outdoor events?",
                            responses: {
                                "ChatGPT": "Aramark",
                                "Claude": "Sysco",
                                "Gemini": "Compass Group",
                                "Llama": "Aramark",
                                "Perplexity": "La Marzocco, Bunn",
                                "Grok": "Aramark"
                            }
                        },
                        {
                            question: "Who provides round-the-clock service support for coffee machines?",
                            responses: {
                                "ChatGPT": "BUNNcare (BUNN Service Network)",
                                "Claude": "Aramark",
                                "Gemini": "Nestlé Professional",
                                "Llama": "Thermoplan",
                                "Perplexity": "La Marzocco, Nuova Simonelli",
                                "Grok": "Franke"
                            }
                        }
                    ]
                },
                {
                    name: "Culinary Solutions",
                    description: "Specialized culinary and ingredient solutions for foodservice",
                    prompts: [
                        {
                            question: "Who provides culinary solutions for central kitchens?",
                            responses: {
                                "ChatGPT": "Unilever Food Solutions",
                                "Claude": "Sysco",
                                "Gemini": "Unilever Food Solutions",
                                "Llama": "Sysco",
                                "Perplexity": "US Foods, Sysco",
                                "Grok": "Rational"
                            }
                        },
                        {
                            question: "Who offers customizable seasoning solutions for restaurants?",
                            responses: {
                                "ChatGPT": "McCormick For Chefs",
                                "Claude": "McCormick & Company",
                                "Gemini": "McCormick & Company",
                                "Llama": "McCormick",
                                "Perplexity": "McCormick",
                                "Grok": "McCormick"
                            }
                        },
                        {
                            question: "Who supplies shelf-stable meal solutions for cafeterias?",
                            responses: {
                                "ChatGPT": "Hormel Foodservice",
                                "Claude": "Compass Group",
                                "Gemini": "General Mills Foodservice",
                                "Llama": "Hormel",
                                "Perplexity": "Kraft Heinz, Conagra",
                                "Grok": "Conagra"
                            }
                        }
                    ]
                },
                {
                    name: "Innovation & Technology",
                    description: "Connected systems and technology-driven coffee solutions",
                    prompts: [
                        {
                            question: "Who provides connected coffee machines with remote monitoring?",
                            responses: {
                                "ChatGPT": "Eversys",
                                "Claude": "Keurig Dr Pepper",
                                "Gemini": "Franke",
                                "Llama": "Thermoplan",
                                "Perplexity": "Nuova Simonelli, La Marzocco",
                                "Grok": "Franke"
                            }
                        },
                        {
                            question: "What's the best way for hotels to co-develop signature beverage blends?",
                            responses: {
                                "ChatGPT": "Lavazza Professional",
                                "Claude": "Starbucks for Business",
                                "Gemini": "Westrock Coffee Company",
                                "Llama": "JDE or Starbucks",
                                "Perplexity": "Specialty roasters (Blue Bottle, Stumptown)",
                                "Grok": "Lavazza"
                            }
                        }
                    ]
                }
            ]
        };

        let activeBrands = new Set();
        let searchTerm = '';
        let totalMatches = 0;

        function escapeForRegex(text) {
            return text.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        function restoreOriginalCells() {
            document.querySelectorAll('[data-original-text]').forEach(cell => {
                cell.innerHTML = cell.getAttribute('data-original-text');
            });
        }

        function highlightMatches(terms, scrollToFirst = false) {
            restoreOriginalCells();
            totalMatches = 0;
            let firstMatch = null;

            if (terms.length === 0) {
                updateResultsCounter();
                return;
            }

            const cells = document.querySelectorAll('td');
            
            cells.forEach(cell => {
                if (!cell.hasAttribute('data-original-text')) {
                    cell.setAttribute('data-original-text', cell.innerHTML);
                }
                
                let content = cell.getAttribute('data-original-text');
                let hasMatch = false;
                
                terms.forEach(term => {
                    if (term.trim()) {
                        const escapedTerm = escapeForRegex(term.trim());
                        const regex = new RegExp(`\\b(${escapedTerm})\\b`, 'gi');
                        const matches = content.match(regex);
                        if (matches) {
                            totalMatches += matches.length;
                            hasMatch = true;
                            content = content.replace(regex, '<span class="highlight">$1</span>');
                        }
                    }
                });
                
                if (hasMatch) {
                    cell.innerHTML = content;
                    if (!firstMatch) {
                        firstMatch = cell;
                    }
                }
            });

            updateResultsCounter();
            
            if (scrollToFirst && firstMatch) {
                firstMatch.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        function updateResultsCounter() {
            document.getElementById('searchResultsInfo').textContent = 
                totalMatches > 0 ? `${totalMatches} matches found` : '';
        }

        function extractUniqueBrands() {
            const brandCounts = {};
            const data = window.WINDOW_DATA;
            
            data.categories.forEach(category => {
                category.prompts.forEach(prompt => {
                    // Count brands in questions
                    const questionText = prompt.question.toLowerCase();
                    
                    // Count brands in responses
                    Object.values(prompt.responses).forEach(response => {
                        const responseText = response.toLowerCase();
                        
                        // Extract brand names (simple heuristic - capitalized words and known brands)
                        const brands = [
                            'Nespresso', 'Keurig', 'BUNN', 'Franke', 'La Marzocco', 'Starbucks',
                            'Nestlé', 'Aramark', 'Sysco', 'McCormick', 'Danone', 'Compass Group',
                            'Thermoplan', 'Jura', 'Lavazza', 'Nuova Simonelli', 'De\'Longhi', 'WMF',
                            'Eversys', 'Sodexo', 'Unilever', 'Hormel', 'Huhtamaki', 'JDE', 'Gategroup',
                            'Gate Gourmet', 'LSG Sky Chefs', 'Schaerer', 'Behmor', 'TerraCycle',
                            'Eco-Products', 'General Mills', 'Kraft Heinz', 'Conagra', 'Rational',
                            'US Foods', 'Westrock', 'Blue Bottle', 'Stumptown'
                        ];
                        
                        brands.forEach(brand => {
                            const brandLower = brand.toLowerCase();
                            const regex = new RegExp(`\\b${escapeForRegex(brandLower)}\\b`, 'gi');
                            const matches = (questionText + ' ' + responseText).match(regex);
                            if (matches) {
                                brandCounts[brand] = (brandCounts[brand] || 0) + matches.length;
                            }
                        });
                    });
                });
            });
            
            // Return top 10 brands sorted by count desc, then alphabetically
            return Object.entries(brandCounts)
                .sort((a, b) => b[1] - a[1] || a[0].localeCompare(b[0]))
                .slice(0, 10);
        }

        function buildBrandBar() {
            const brandBar = document.getElementById('brandBar');
            const topBrands = extractUniqueBrands();
            
            brandBar.innerHTML = '<strong style="color: #00d4ff; margin-right: 15px;">Top Brands:</strong>';
            
            topBrands.forEach(([brand, count]) => {
                const btn = document.createElement('button');
                btn.className = 'brand-btn';
                btn.textContent = `${brand} (${count})`;
                btn.onclick = () => toggleBrand(brand, btn);
                brandBar.appendChild(btn);
            });
            
            const clearBtn = document.createElement('button');
            clearBtn.className = 'brand-btn brand-clear';
            clearBtn.textContent = 'Clear All';
            clearBtn.onclick = clearAllBrands;
            brandBar.appendChild(clearBtn);
        }

        function toggleBrand(brand, button) {
            if (activeBrands.has(brand)) {
                activeBrands.delete(brand);
                button.classList.remove('active');
            } else {
                activeBrands.add(brand);
                button.classList.add('active');
            }
            
            updateHighlighting();
        }

        function clearAllBrands() {
            activeBrands.clear();
            document.querySelectorAll('.brand-btn.active').forEach(btn => {
                btn.classList.remove('active');
            });
            updateHighlighting();
        }

        function updateHighlighting() {
            const terms = [];
            if (searchTerm.trim()) terms.push(searchTerm.trim());
            activeBrands.forEach(brand => terms.push(brand));
            
            highlightMatches(terms);
        }

        function clearSearch() {
            searchTerm = '';
            document.getElementById('searchInput').value = '';
            updateHighlighting();
        }

        function renderCategories() {
            const mainContent = document.getElementById('mainContent');
            const data = window.WINDOW_DATA;
            
            let html = '';
            
            data.categories.forEach(category => {
                const llmNames = Object.keys(category.prompts[0].responses);
                
                html += `
                    <section class="category-section">
                        <div class="category-header">${category.name}</div>
                        <div class="category-stats">${category.prompts.length} prompts analyzed</div>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th style="min-width: 300px;">Prompt Question</th>
                                        ${llmNames.map(name => `<th>${name}</th>`).join('')}
                                    </tr>
                                </thead>
                                <tbody>
                                    ${category.prompts.map(prompt => `
                                        <tr>
                                            <td class="prompt-cell">${prompt.question}</td>
                                            ${llmNames.map(llm => `<td class="llm-response">${prompt.responses[llm]}</td>`).join('')}
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </section>
                `;
            });
            
            mainContent.innerHTML = html;
        }

        function init() {
            renderCategories();
            buildBrandBar();
            
            // Set up search input
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', (e) => {
                searchTerm = e.target.value;
                updateHighlighting();
            });
            
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    updateHighlighting();
                }
            });
        }

        // Initialize the dashboard
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
