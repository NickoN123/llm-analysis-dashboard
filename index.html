<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Index Hub - Data Intelligence Center</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #0a0e1a;
      color: #e0e0e0;
      line-height: 1.6;
    }

    /* NAVBAR */
    .navbar {
      background-color: #0d1220;
      border-bottom: 1px solid #00d4ff;
      padding: 15px 25px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky; top: 0; z-index: 1000;
    }
    .navbar-title { color: #00d4ff; font-weight: 700; font-size: 1.3rem; text-decoration: none; }
    .navbar-links a {
      color: #e0e0e0; margin-left: 20px; text-decoration: none; font-size: 1rem; transition: color .2s ease;
    }
    .navbar-links a:hover { color: #00d4ff; }

    .hero {
      background: linear-gradient(135deg, #0a0e1a 0%, #141822 100%);
      padding: 80px 20px; text-align: center; border-bottom: 3px solid #00d4ff;
    }
    .hero-title {
      font-size: 3.5rem; font-weight: 700; color: #00d4ff; margin-bottom: 20px;
      text-shadow: 0 0 20px rgba(0,212,255,.3);
    }
    .hero-subtitle { font-size: 1.3rem; color: #b0b0b0; font-weight: 300; max-width: 700px; margin: 0 auto 40px; }
    .hero-description { font-size: 1rem; color: #909090; max-width: 600px; margin: 0 auto; line-height: 1.8; }

    .container { max-width: 1400px; margin: 0 auto; padding: 60px 20px; }
    .section-title { font-size: 2rem; color: #00d4ff; margin-bottom: 20px; text-align: center; font-weight: 600; }

    /* Subsection header */
    .subsection-title {
      margin: 30px 0 15px;
      font-size: 1.25rem;
      color: #b8eaff;
      font-weight: 600;
      border-left: 4px solid #00d4ff;
      padding-left: 12px;
    }

    .index-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 30px;
      margin-bottom: 40px;
    }

    .index-card {
      background: #141822; border: 1px solid #1a2030; border-radius: 12px;
      padding: 30px; transition: all .3s ease; position: relative; overflow: hidden; cursor: pointer;
    }
    .index-card:hover { transform: translateY(-5px); border-color: #00d4ff; box-shadow: 0 10px 30px rgba(0,212,255,.2); }
    .index-card-icon { font-size: 2.5rem; margin-bottom: 20px; color: #00d4ff; }
    .index-card-title { font-size: 1.5rem; color: #00d4ff; margin-bottom: 15px; font-weight: 600; }
    .index-card-description { color: #b0b0b0; margin-bottom: 20px; line-height: 1.7; }
    .index-card-meta { display: flex; justify-content: space-between; align-items: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid #1a2030; }
    .index-card-date { color: #707070; font-size: .85rem; }
    .index-card-badge { background: #1a2030; color: #00d4ff; padding: 4px 12px; border-radius: 12px; font-size: .8rem; font-weight: 600; }
    a.index-card-link { text-decoration: none; color: inherit; display: block; }

    /* Upload UI */
    .btn {
      display:inline-block; padding:10px 16px; border:1px solid #00d4ff;
      border-radius:10px; color:#00d4ff; background:transparent; cursor:pointer;
      font-weight:600; transition:all .2s ease; text-decoration:none;
    }
    .btn:hover { background:#001b22; box-shadow:0 6px 16px rgba(0,212,255,.2);}
    .input {
      background:#0f1422; border:1px solid #1a2030; color:#e0e0e0;
      padding:10px 12px; border-radius:10px;
    }
    .select { appearance:none; }
    .del-pill {
      background:#1a2030; color:#ff6b6b; border:1px solid #2a2a2a;
      padding:4px 8px; border-radius:999px; font-size:.75rem; cursor:pointer;
    }

    .footer { text-align: center; padding: 40px 20px; color: #707070; border-top: 1px solid #1a2030; margin-top: 60px; }
    .footer a { color: #00d4ff; text-decoration: none; }
    .footer a:hover { text-decoration: underline; }

    @media (max-width: 768px) {
      .hero-title { font-size: 2.5rem; }
      .hero-subtitle { font-size: 1.1rem; }
      .index-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

  <!-- Invisible anchor for "Top" -->
  <div id="top"></div>

  <!-- NAVBAR -->
  <div class="navbar">
    <a href="#top" class="navbar-title">Index Hub</a>
    <div class="navbar-links">
      <a href="#all">All</a>
      <a href="#brandrank">BrandRank</a>
      <a href="#industry">Industry</a>
      <a href="#dashboards">Dashboards</a>
      <a href="#research">Research</a>
      <a href="#uploads">Uploads</a>
    </div>
  </div>

  <script>
    // Smooth scrolling
    document.querySelectorAll('.navbar-links a').forEach(link => {
      link.addEventListener('click', e => {
        e.preventDefault();
        const target = document.querySelector(link.getAttribute('href'));
        if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    });
  </script>

  <div class="hero">
    <h1 class="hero-title">Index Hub</h1>
    <p class="hero-subtitle">Data Intelligence & Analytics Center</p>
    <p class="hero-description">
      Explore comprehensive datasets, market analysis, and intelligence reports across multiple industries and categories.
    </p>
  </div>

  <!-- ===== Uploads (control panel at top) ===== -->
  <div class="container" id="uploads" style="padding-top:30px;">
    <h3 class="subsection-title">Uploads</h3>
    <div class="index-card" style="margin-bottom:24px;">
      <div class="index-card-icon">üóÇÔ∏è</div>
      <h3 class="index-card-title" style="margin-bottom:8px;">Add a File</h3>
      <p class="index-card-description" style="margin-bottom:16px;">
        Choose a section, pick an icon, and upload any file. It will appear as a card at the top of that section. If your GitHub settings are configured below, it will also generate a hosted link you can share.
      </p>
      <div style="display:flex; gap:12px; flex-wrap:wrap; align-items:center;">
        <input id="uploadTitle" class="input" type="text" placeholder="Optional title (defaults to file name)"/>
        <input id="uploadIcon" class="input" type="text" placeholder="Icon (e.g., üß©)" style="width:120px"/>
        <select id="uploadSection" class="input select" aria-label="Section">
          <option value="brandrank">BrandRank</option>
          <option value="industry">Industry</option>
          <option value="dashboards">Dashboards</option>
          <option value="research" selected>Research</option>
        </select>
        <!-- Accept any file type -->
        <input id="uploadFile" class="input" type="file" accept="*/*"/>
        <button id="uploadBtn" class="btn">Add to Page</button>
      </div>
      <p style="color:#707070; font-size:.85rem; margin-top:10px;">
        Note: If your GitHub configuration is valid, uploads are pushed to your repo and given a shareable URL. Otherwise, they are stored locally in this browser only.
      </p>
    </div>
  </div>

  <!-- All -->
  <div class="container" id="all">
    <h2 class="section-title">Available Indexes</h2>

    <!-- ===== BrandRank Index Suite ===== -->
    <h3 class="subsection-title" id="brandrank">BrandRank Index Suite</h3>
    <div class="index-grid" id="brandrankGrid">
      <a href="BR-BrandRank100-BestOfCPG (3).html" class="index-card-link">
        <div class="index-card">
          <div class="index-card-icon">üèÜ</div>
          <h3 class="index-card-title">BrandRank 100 ‚Äî Best of CPG</h3>
          <p class="index-card-description">Best-of CPG leaderboard derived from BrandRank signals.</p>
          <div class="index-card-meta"><span class="index-card-date">2025</span><span class="index-card-badge">Live</span></div>
        </div>
      </a>
    </div>
  </div>

  <div class="footer">
    <p>&copy; 2025 Index Hub. Built with data intelligence in mind.</p>
    <p><a href="https://github.com/NickoN123/llm-analysis-dashboard">GitHub</a></p>
  </div>

  <!-- Uploads logic -->
  <script>
    // Your existing upload logic, modified to accept any file type

    const uploadBtnEl = document.getElementById('uploadBtn');
    const uploadFileEl = document.getElementById('uploadFile');
    const uploadTitleEl = document.getElementById('uploadTitle');
    const uploadIconEl = document.getElementById('uploadIcon');
    const uploadSectionEl = document.getElementById('uploadSection');

    uploadBtnEl.addEventListener('click', async () => {
      const file = uploadFileEl.files[0];

      if (!file) {
        alert('Please choose a file to upload.');
        return;
      }

      const reader = new FileReader();
      reader.onload = async (e) => {
        const contentText = e.target.result;
        const title = uploadTitleEl.value || file.name.replace(/\.[^/.]+$/, '');
        const icon = uploadIconEl.value || 'üìÑ';  // Default icon
        const section = uploadSectionEl.value;

        let url = null;

        // Handle the file upload to GitHub (if configured)
        try {
          url = await uploadToGitHub({
            fileName: file.name,
            html: contentText
          });
        } catch (err) {
          console.error('Error uploading to GitHub:', err);
          alert('Error uploading to GitHub. File will be saved locally.');
        }

        // Store the uploaded file's details
        const uploadData = {
          id: Date.now() + '_' + Math.random().toString(36).slice(2),
          title,
          icon,
          section,
          dateISO: new Date().toISOString(),
          contentText,
          url  // GitHub URL or null
        };

        saveUpload(uploadData);  // Save the upload to local storage or GitHub
        displayUploads();  // Refresh the list of uploads
      };
      reader.readAsText(file);  // Read the file content
    });

    // Helper functions to manage uploads
    function saveUpload(uploadData) {
      const uploads = getUploads();
      uploads.unshift(uploadData);  // Add the new upload to the front of the array
      localStorage.setItem('uploads', JSON.stringify(uploads));
    }

    function getUploads() {
      const uploads = localStorage.getItem('uploads');
      return uploads ? JSON.parse(uploads) : [];
    }

    function displayUploads() {
      const uploads = getUploads();
      const uploadsGrid = document.getElementById('uploads');
      uploadsGrid.innerHTML = '';  // Clear previous uploads

      uploads.forEach(upload => {
        const card = document.createElement('div');
        card.classList.add('index-card');
        card.innerHTML = `
          <div class="index-card-icon">${upload.icon}</div>
          <h3 class="index-card-title">${upload.title}</h3>
          <p class="index-card-description">${upload.url ? 'Uploaded to GitHub' : 'Stored locally'}</p>
          <div class="index-card-meta">
            <span class="index-card-date">${new Date(upload.dateISO).toLocaleDateString()}</span>
          </div>
        `;

        uploadsGrid.appendChild(card);  // Append the new card
      });
    }

    // Call this on initial page load to display existing uploads
    displayUploads();
  </script>

</body>
</html>
