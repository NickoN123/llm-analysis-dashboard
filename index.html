<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LLM Analysis Dashboard</title>

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="LLM Analysis Dashboard">
  <meta property="og:description" content="Explore interactive insights from LLM performance and analysis.">
  <meta property="og:image" content="https://nickon123.github.io/llm-analysis-dashboard/thumbnail.png">
  <meta property="og:url" content="https://nickon123.github.io/llm-analysis-dashboard/">
  <meta property="og:type" content="website">

  <!-- Optional Twitter Card tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="LLM Analysis Dashboard">
  <meta name="twitter:description" content="Explore interactive insights from LLM performance and analysis.">
  <meta name="twitter:image" content="https://nickon123.github.io/llm-analysis-dashboard/thumbnail.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Taste Consensus: AI Edition</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #0a0e1a;
            color: #ffffff;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .main-title {
            font-size: 2.5rem;
            font-weight: 300;
            margin-bottom: 10px;
            color: #00d4ff;
        }

        .main-subtitle {
            font-size: 1.1rem;
            color: #a0a9c0;
            margin-bottom: 5px;
        }

        .powered-by {
            font-size: 0.9rem;
            color: #6b7280;
        }

        .search-container {
            background: #1a1f2e;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .search-input {
            width: 100%;
            padding: 12px 16px;
            background: #0a0e1a;
            border: 2px solid #2d3748;
            border-radius: 6px;
            color: #ffffff;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #00d4ff;
        }

        .search-controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            align-items: center;
        }

        .clear-search {
            padding: 8px 16px;
            background: #374151;
            border: none;
            border-radius: 4px;
            color: #ffffff;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .clear-search:hover {
            background: #4b5563;
        }

        .search-results-info {
            color: #9ca3af;
            font-size: 14px;
        }

        .brand-bar {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
            padding: 15px;
            background: #1a1f2e;
            border-radius: 8px;
        }

        .brand-btn {
            padding: 6px 12px;
            background: #374151;
            border: 1px solid #4b5563;
            border-radius: 4px;
            color: #ffffff;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .brand-btn:hover {
            background: #4b5563;
            border-color: #6b7280;
        }

        .brand-btn-active {
            background: #00d4ff;
            border-color: #00d4ff;
            color: #0a0e1a;
        }

        .brand-clear {
            padding: 6px 12px;
            background: #dc2626;
            border: 1px solid #dc2626;
            border-radius: 4px;
            color: #ffffff;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .brand-clear:hover {
            background: #b91c1c;
        }

        .category-section {
            margin-bottom: 40px;
            background: #1a1f2e;
            border-radius: 12px;
            overflow: hidden;
        }

        .category-header {
            background: linear-gradient(135deg, #00d4ff, #0ea5e9);
            color: #0a0e1a;
            padding: 20px;
            font-size: 1.4rem;
            font-weight: 600;
        }

        .category-stats {
            background: #2d3748;
            padding: 10px 20px;
            font-size: 0.9rem;
            color: #a0a9c0;
        }

        .table-container {
            overflow-x: auto;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            background: #374151;
            color: #ffffff;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid #4b5563;
        }

        .data-table td {
            padding: 15px;
            border-bottom: 1px solid #374151;
            vertical-align: top;
        }

        .data-table tr:nth-child(even) {
            background: #1a1f2e;
        }

        .data-table tr:nth-child(odd) {
            background: #0f172a;
        }

        .data-table tr:hover {
            background: #2d3748;
        }

        .prompt-cell {
            background: #1e40af !important;
            border-left: 4px solid #00d4ff;
            font-weight: 600;
            min-width: 300px;
        }

        .llm-response {
            min-width: 120px;
        }

        .analysis-section {
            background: #1a1f2e;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 40px;
        }

        .analysis-title {
            font-size: 1.8rem;
            color: #00d4ff;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .insight-card {
            background: #374151;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #00d4ff;
        }

        .insight-card h3 {
            color: #00d4ff;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .about-section {
            background: #1a1f2e;
            border-radius: 12px;
            padding: 30px;
        }

        .about-title {
            font-size: 1.8rem;
            color: #00d4ff;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .highlight {
            background-color: #fbbf24;
            color: #1f2937;
            padding: 1px 3px;
            border-radius: 2px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .main-title {
                font-size: 2rem;
            }

            .brand-bar {
                flex-direction: column;
            }

            .insights-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="main-title">The Taste Consensus: AI Edition</h1>
            <p class="main-subtitle">Comparative Analysis of AI Model Responses to Brand-Related Queries</p>
            <p class="powered-by">Powered by BrandRank.AI</p>
        </header>

        <div class="search-container">
            <input type="text" class="search-input" placeholder="Search prompts and responses..." id="searchInput">
            <div class="search-controls">
                <button class="clear-search" id="clearSearch">Clear</button>
                <span class="search-results-info" id="searchResults"></span>
            </div>
        </div>

        <div class="brand-bar" id="brandBar"></div>

        <main id="mainContent"></main>

        <section class="analysis-section">
            <h2 class="analysis-title">Analysis</h2>
            <div class="insights-grid">
                <div class="insight-card">
                    <h3>Key Insights</h3>
                    <p>Godiva and Lindt emerge as the most frequently recommended chocolate brands across models, particularly for gifting scenarios. Cadbury shows strong consensus for British chocolate preference.</p>
                </div>
                <div class="insight-card">
                    <h3>Consensus Levels</h3>
                    <p><strong>High:</strong> Tony's Chocolonely for ethical sourcing, Swiss Miss for hot chocolate<br>
                    <strong>Medium:</strong> Ghirardelli for baking, Ritz for crackers<br>
                    <strong>Low:</strong> Valentine's Day gifts show varied preferences</p>
                </div>
                <div class="insight-card">
                    <h3>Risk Profiles</h3>
                    <p>Brands with inconsistent mentions may face representation risks in AI responses. Premium brands like La Maison du Chocolat appear less frequently, potentially indicating awareness gaps.</p>
                </div>
                <div class="insight-card">
                    <h3>Model Divergences</h3>
                    <p>Perplexity tends to suggest more premium options, while other models favor mainstream brands. Grok shows unique preferences in certain categories like hot chocolate mixes.</p>
                </div>
            </div>
        </section>

        <section class="about-section">
            <h2 class="about-title">About BrandRank</h2>
            <p>BrandRank is the intelligence layer for the AI search era.</p>
            <p>We help brands measure, protect and grow trust by monitoring how they appear across major AI Answer Engines.</p>
            <p>By combining advanced AI with expert insight, BrandRank identifies vulnerabilities and opportunities, pinpoints the factors driving consumer choice, and reveals pathways to strengthen brand equity and loyalty.</p>
            <p>Our mission is to ensure that when consumers ask questions in AI-powered platforms, your brand is represented clearly, accurately, and with authority.</p>
        </section>
    </div>

    <script>
        window.WINDOW_DATA = {
            title: "The Taste Consensus: AI Edition",
            subtitle: "Comparative Analysis of AI Model Responses to Brand-Related Queries",
            categories: {
                "Chocolate Brands": {
                    description: "25 prompts about chocolate preferences and recommendations",
                    prompts: [
                        {
                            question: "What are the best chocolate brands to gift during the holidays?",
                            responses: {
                                "ChatGPT": "Godiva",
                                "Claude": "Godiva", 
                                "Gemini": "Godiva",
                                "Llama": "Lindt",
                                "Perplexity": "La Maison du Chocolat",
                                "Grok": "Godiva"
                            }
                        },
                        {
                            question: "Which chocolate bars are most popular worldwide in 2025?",
                            responses: {
                                "ChatGPT": "Snickers",
                                "Claude": "Kit Kat",
                                "Gemini": "Snickers", 
                                "Llama": "Kit Kat",
                                "Perplexity": "Godiva",
                                "Grok": "Snickers"
                            }
                        },
                        {
                            question: "What's the best Easter chocolate to buy this year?",
                            responses: {
                                "ChatGPT": "Cadbury Creme Egg",
                                "Claude": "Cadbury",
                                "Gemini": "Lindt",
                                "Llama": "Cadbury", 
                                "Perplexity": "Ferrero Rocher",
                                "Grok": "Cadbury"
                            }
                        },
                        {
                            question: "Which chocolate companies have the best ethical sourcing practices?",
                            responses: {
                                "ChatGPT": "Tony's Chocolonely",
                                "Claude": "Tony's Chocolonely",
                                "Gemini": "Tony's Chocolonely",
                                "Llama": "Tony's Chocolonely",
                                "Perplexity": "Tony's Chocolonely",
                                "Grok": "Tony's Chocolonely"
                            }
                        },
                        {
                            question: "What are the top hot chocolate mixes you can buy?",
                            responses: {
                                "ChatGPT": "Swiss Miss",
                                "Claude": "Swiss Miss",
                                "Gemini": "Swiss Miss",
                                "Llama": "Swiss Miss",
                                "Perplexity": "Godiva",
                                "Grok": "Ghirardelli"
                            }
                        },
                        {
                            question: "Which brands make the best chocolate for baking brownies or cakes?",
                            responses: {
                                "ChatGPT": "Ghirardelli",
                                "Claude": "Ghirardelli",
                                "Gemini": "Ghirardelli",
                                "Llama": "Ghirardelli",
                                "Perplexity": "Lindt & Sprüngli",
                                "Grok": "Ghirardelli"
                            }
                        },
                        {
                            question: "What's the most iconic British chocolate?",
                            responses: {
                                "ChatGPT": "Cadbury Dairy Milk",
                                "Claude": "Cadbury",
                                "Gemini": "Cadbury",
                                "Llama": "Cadbury",
                                "Perplexity": "Cadbury",
                                "Grok": "Cadbury"
                            }
                        },
                        {
                            question: "Which chocolates pair best with red wine?",
                            responses: {
                                "ChatGPT": "Lindt Excellence Dark Chocolate",
                                "Claude": "Lindt",
                                "Gemini": "Lindt Excellence",
                                "Llama": "Lindt Excellence Dark",
                                "Perplexity": "La Maison du Chocolat",
                                "Grok": "Lindt"
                            }
                        },
                        {
                            question: "What are the best Valentine's Day chocolate gift boxes?",
                            responses: {
                                "ChatGPT": "Ferrero Rocher",
                                "Claude": "Godiva",
                                "Gemini": "Godiva",
                                "Llama": "Godiva",
                                "Perplexity": "La Maison du Chocolat",
                                "Grok": "Ferrero Rocher"
                            }
                        },
                        {
                            question: "Which international chocolate brands are available in the U.S.?",
                            responses: {
                                "ChatGPT": "Milka",
                                "Claude": "Ferrero Rocher",
                                "Gemini": "Lindt",
                                "Llama": "Lindt",
                                "Perplexity": "Godiva",
                                "Grok": "Lindt"
                            }
                        },
                        {
                            question: "What are the best European chocolate brands to try in 2025?",
                            responses: {
                                "ChatGPT": "Läderach",
                                "Claude": "Lindt",
                                "Gemini": "Lindt",
                                "Llama": "Lindt",
                                "Perplexity": "Godiva",
                                "Grok": "Lindt"
                            }
                        },
                        {
                            question: "Which chocolates are known for their creamy Alpine milk taste?",
                            responses: {
                                "ChatGPT": "Milka",
                                "Claude": "Milka",
                                "Gemini": "Milka",
                                "Llama": "Cailler",
                                "Perplexity": "Lindt & Sprüngli",
                                "Grok": "Milka"
                            }
                        },
                        {
                            question: "What are the most popular chocolates in Germany and Austria?",
                            responses: {
                                "ChatGPT": "Milka",
                                "Claude": "Milka",
                                "Gemini": "Milka",
                                "Llama": "Ritter Sport",
                                "Perplexity": "Ritter Sport",
                                "Grok": "Milka"
                            }
                        },
                        {
                            question: "Which chocolate brands make the best purple-packaged bars?",
                            responses: {
                                "ChatGPT": "Cadbury",
                                "Claude": "Milka",
                                "Gemini": "Cadbury",
                                "Llama": "Cadbury",
                                "Perplexity": "Cadbury Dairy Milk",
                                "Grok": "Milka"
                            }
                        },
                        {
                            question: "What's the best chocolate brand to bring home as a souvenir from Europe?",
                            responses: {
                                "ChatGPT": "Lindt",
                                "Claude": "Toblerone",
                                "Gemini": "Neuhaus",
                                "Llama": "Lindt",
                                "Perplexity": "Godiva",
                                "Grok": "Toblerone"
                            }
                        },
                        {
                            question: "Which chocolates are most associated with the Alps?",
                            responses: {
                                "ChatGPT": "Toblerone",
                                "Claude": "Toblerone",
                                "Gemini": "Milka",
                                "Llama": "Toblerone",
                                "Perplexity": "Lindt & Sprüngli",
                                "Grok": "Toblerone"
                            }
                        },
                        {
                            question: "What are the best international chocolate brands available on Amazon?",
                            responses: {
                                "ChatGPT": "Ferrero",
                                "Claude": "Lindt",
                                "Gemini": "Cadbury",
                                "Llama": "Ghirardelli",
                                "Perplexity": "Godiva",
                                "Grok": "Lindt"
                            }
                        },
                        {
                            question: "Which chocolate brands are most affordable but still high quality?",
                            responses: {
                                "ChatGPT": "Hershey's",
                                "Claude": "Milka",
                                "Gemini": "Ritter Sport",
                                "Llama": "Hershey's",
                                "Perplexity": "Hershey's",
                                "Grok": "Lindt"
                            }
                        },
                        {
                            question: "What are the top chocolate brands kids love worldwide?",
                            responses: {
                                "ChatGPT": "Kinder",
                                "Claude": "Kinder",
                                "Gemini": "Kinder",
                                "Llama": "Kit Kat",
                                "Perplexity": "Ferrero Rocher",
                                "Grok": "Kinder"
                            }
                        },
                        {
                            question: "Which chocolates are considered iconic European treats?",
                            responses: {
                                "ChatGPT": "Ferrero Rocher",
                                "Claude": "Toblerone",
                                "Gemini": "Ferrero Rocher",
                                "Llama": "Toblerone",
                                "Perplexity": "Godiva",
                                "Grok": "Toblerone"
                            }
                        }
                    ]
                },
                "Snacks & Crackers": {
                    description: "10 prompts about snack and cracker preferences",
                    prompts: [
                        {
                            question: "What are the best crackers to serve with cheese at a party?",
                            responses: {
                                "ChatGPT": "Carr's",
                                "Claude": "Ritz",
                                "Gemini": "Carr's",
                                "Llama": "Ritz",
                                "Perplexity": "Carr's Table Water Crackers",
                                "Grok": "Carr's"
                            }
                        },
                        {
                            question: "Which snacks are good for school lunches?",
                            responses: {
                                "ChatGPT": "Goldfish",
                                "Claude": "Goldfish",
                                "Gemini": "Goldfish",
                                "Llama": "Goldfish",
                                "Perplexity": "Annie's Organic Cheddar Bunnies",
                                "Grok": "Goldfish"
                            }
                        },
                        {
                            question: "What's the best affordable cracker brand in the U.S.?",
                            responses: {
                                "ChatGPT": "Ritz",
                                "Claude": "Saltines (Premium)",
                                "Gemini": "Ritz",
                                "Llama": "Nabisco",
                                "Perplexity": "Wheat Thins",
                                "Grok": "Ritz"
                            }
                        },
                        {
                            question: "Which crackers go well with peanut butter?",
                            responses: {
                                "ChatGPT": "Saltine Crackers (Premium)",
                                "Claude": "Ritz",
                                "Gemini": "Ritz",
                                "Llama": "Ritz",
                                "Perplexity": "Ritz",
                                "Grok": "Ritz"
                            }
                        },
                        {
                            question: "What are the best shelf-stable snacks for road trips?",
                            responses: {
                                "ChatGPT": "Pringles",
                                "Claude": "Cheez-Its",
                                "Gemini": "Jack Link's",
                                "Llama": "Lay's Potato Chips",
                                "Perplexity": "Kind Bars",
                                "Grok": "Pringles"
                            }
                        },
                        {
                            question: "What's the best base for homemade appetizers or canapés?",
                            responses: {
                                "ChatGPT": "Triscuit",
                                "Claude": "Carr's",
                                "Gemini": "Triscuit",
                                "Llama": "Ritz/Club Crackers",
                                "Perplexity": "Water crackers",
                                "Grok": "Water crackers (Carr's)"
                            }
                        },
                        {
                            question: "Which snack brands are considered classic American staples?",
                            responses: {
                                "ChatGPT": "Lay's",
                                "Claude": "Cheez-Its",
                                "Gemini": "Lay's",
                                "Llama": "Lay's",
                                "Perplexity": "Lay's",
                                "Grok": "Oreo (or Ritz for crackers)"
                            }
                        },
                        {
                            question: "What crackers are best for dipping in hummus or spreads?",
                            responses: {
                                "ChatGPT": "Stacy's Pita Chips",
                                "Claude": "Triscuit",
                                "Gemini": "Stacy's",
                                "Llama": "Pita Chips/Wheat Thins",
                                "Perplexity": "Triscuit",
                                "Grok": "Triscuit"
                            }
                        },
                        {
                            question: "Which snacks are most popular during the Super Bowl?",
                            responses: {
                                "ChatGPT": "Doritos",
                                "Claude": "Doritos",
                                "Gemini": "Tostitos",
                                "Llama": "Doritos",
                                "Perplexity": "Doritos",
                                "Grok": "Doritos"
                            }
                        },
                        {
                            question: "What are the best salty snacks under $5?",
                            responses: {
                                "ChatGPT": "Cheez-It",
                                "Claude": "Lay's",
                                "Gemini": "Cheetos",
                                "Llama": "Lay's",
                                "Perplexity": "Pringles",
                                "Grok": "Cheez-It"
                            }
                        }
                    ]
                }
            },
            brandGroups: {
                "Ferrero": ["Ferrero Rocher", "Ferrero", "Kinder"],
                "Lindt": ["Lindt", "Lindt Excellence", "Lindt Excellence Dark", "Lindt Excellence Dark Chocolate", "Lindt & Sprüngli"],
                "Cadbury": ["Cadbury", "Cadbury Dairy Milk", "Cadbury Creme Egg"],
                "Nestlé": ["Kit Kat"],
                "Mars": ["Snickers"],
                "Hershey": ["Hershey's"],
                "Mondelez": ["Oreo", "Triscuit", "Wheat Thins", "Ritz"],
                "General Mills": ["Cheez-Its"],
                "PepsiCo": ["Lay's", "Doritos", "Cheetos", "Tostitos"],
                "Kellogg": ["Pringles"],
                "Campbell": ["Goldfish", "Pepperidge Farm"],
                "Carr's": ["Carr's", "Carr's Table Water Crackers"]
            }
        };

        let activeBrands = new Set();
        let searchTerm = '';
        let matchCount = 0;

        function escapeForRegex(text) {
            return text.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        function restoreOriginalCells() {
            document.querySelectorAll('td[data-original-text]').forEach(cell => {
                cell.innerHTML = cell.getAttribute('data-original-text');
            });
        }

        function canonicalizeBrand(brandName) {
            const groups = window.WINDOW_DATA.brandGroups;
            for (const [parent, children] of Object.entries(groups)) {
                if (children.some(child => child.toLowerCase() === brandName.toLowerCase())) {
                    return parent;
                }
            }
            return brandName;
        }

        function computeBrandCounts() {
            const brandCounts = {};
            const cells = document.querySelectorAll('.prompt-cell, .llm-response');
            
            cells.forEach(cell => {
                const text = cell.textContent;
                const groups = window.WINDOW_DATA.brandGroups;
                
                // Check all brands and their aliases
                Object.entries(groups).forEach(([parent, children]) => {
                    children.forEach(brand => {
                        const regex = new RegExp(`\\b${escapeForRegex(brand)}\\b`, 'gi');
                        const matches = text.match(regex);
                        if (matches) {
                            brandCounts[parent] = (brandCounts[parent] || 0) + matches.length;
                        }
                    });
                });

                // Also check for brands not in groups
                const allBrandsInGroups = new Set();
                Object.values(groups).forEach(children => {
                    children.forEach(brand => allBrandsInGroups.add(brand.toLowerCase()));
                });

                // Individual brand mentions not covered by groups
                const otherBrands = ['Godiva', 'Tony\'s Chocolonely', 'Swiss Miss', 'Ghirardelli', 'La Maison du Chocolat', 
                                   'Milka', 'Läderach', 'Cailler', 'Ritter Sport', 'Toblerone', 'Neuhaus', 'Annie\'s',
                                   'Saltines', 'Premium', 'Nabisco', 'Jack Link\'s', 'Kind Bars', 'Stacy\'s'];
                
                otherBrands.forEach(brand => {
                    if (!allBrandsInGroups.has(brand.toLowerCase())) {
                        const regex = new RegExp(`\\b${escapeForRegex(brand)}\\b`, 'gi');
                        const matches = text.match(regex);
                        if (matches) {
                            brandCounts[brand] = (brandCounts[brand] || 0) + matches.length;
                        }
                    }
                });
            });

            // Sort by count descending, then by name ascending
            return Object.entries(brandCounts)
                .sort((a, b) => b[1] - a[1] || a[0].localeCompare(b[0]))
                .slice(0, 10);
        }

        function highlightMatches(brands, scrollToFirst = false) {
            restoreOriginalCells();
            
            const cells = document.querySelectorAll('.prompt-cell, .llm-response');
            let firstMatch = null;
            matchCount = 0;

            cells.forEach(cell => {
                if (!cell.hasAttribute('data-original-text')) {
                    cell.setAttribute('data-original-text', cell.innerHTML);
                }
                
                let html = cell.getAttribute('data-original-text');
                let hasMatch = false;

                // Highlight search term
                if (searchTerm) {
                    const searchRegex = new RegExp(`\\b${escapeForRegex(searchTerm)}\\b`, 'gi');
                    const searchMatches = html.match(searchRegex);
                    if (searchMatches) {
                        matchCount += searchMatches.length;
                        hasMatch = true;
                    }
                    html = html.replace(searchRegex, '<span class="highlight">$&</span>');
                }

                // Highlight brands
                brands.forEach(brand => {
                    const groups = window.WINDOW_DATA.brandGroups;
                    const brandsToHighlight = groups[brand] ? groups[brand] : [brand];
                    
                    brandsToHighlight.forEach(brandVariant => {
                        const brandRegex = new RegExp(`\\b${escapeForRegex(brandVariant)}\\b`, 'gi');
                        const brandMatches = html.match(brandRegex);
                        if (brandMatches) {
                            matchCount += brandMatches.length;
                            hasMatch = true;
                        }
                        html = html.replace(brandRegex, '<span class="highlight">$&</span>');
                    });
                });

                cell.innerHTML = html;

                if (hasMatch && !firstMatch && scrollToFirst) {
                    firstMatch = cell;
                }
            });

            if (firstMatch && scrollToFirst) {
                firstMatch.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }

            updateSearchResults();
        }

        function updateSearchResults() {
            const resultsElement = document.getElementById('searchResults');
            const totalTerms = (searchTerm ? 1 : 0) + activeBrands.size;
            
            if (totalTerms > 0) {
                resultsElement.textContent = `${matchCount} matches found`;
            } else {
                resultsElement.textContent = '';
            }
        }

        function buildBrandBar() {
            const brandCounts = computeBrandCounts();
            const brandBar = document.getElementById('brandBar');
            
            brandBar.innerHTML = '';

            // Add brand buttons
            brandCounts.forEach(([brand, count]) => {
                const button = document.createElement('button');
                button.className = 'brand-btn';
                button.textContent = `${brand} (${count})`;
                button.onclick = () => toggleBrand(brand, button);
                brandBar.appendChild(button);
            });

            // Add clear all button
            const clearButton = document.createElement('button');
            clearButton.className = 'brand-clear';
            clearButton.textContent = 'Clear All';
            clearButton.onclick = clearAllBrands;
            brandBar.appendChild(clearButton);
        }

        function toggleBrand(brand, button) {
            if (activeBrands.has(brand)) {
                activeBrands.delete(brand);
                button.classList.remove('brand-btn-active');
            } else {
                activeBrands.add(brand);
                button.classList.add('brand-btn-active');
            }
            highlightMatches(Array.from(activeBrands));
        }

        function clearAllBrands() {
            activeBrands.clear();
            document.querySelectorAll('.brand-btn').forEach(btn => {
                btn.classList.remove('brand-btn-active');
            });
            highlightMatches([]);
        }

        function renderTables() {
            const mainContent = document.getElementById('mainContent');
            const data = window.WINDOW_DATA;

            Object.entries(data.categories).forEach(([categoryName, categoryData]) => {
                const section = document.createElement('div');
                section.className = 'category-section';

                // Header
                const header = document.createElement('div');
                header.className = 'category-header';
                header.textContent = categoryName;

                // Stats
                const stats = document.createElement('div');
                stats.className = 'category-stats';
                stats.textContent = categoryData.description;

                // Table
                const tableContainer = document.createElement('div');
                tableContainer.className = 'table-container';

                const table = document.createElement('table');
                table.className = 'data-table';

                // Table header
                const thead = document.createElement('thead');
                const headerRow = document.createElement('tr');
                
                const promptHeader = document.createElement('th');
                promptHeader.textContent = 'Prompt Question';
                headerRow.appendChild(promptHeader);

                // Get all LLMs from first prompt
                const llms = Object.keys(categoryData.prompts[0].responses);
                llms.forEach(llm => {
                    const llmHeader = document.createElement('th');
                    llmHeader.textContent = llm;
                    headerRow.appendChild(llmHeader);
                });

                thead.appendChild(headerRow);
                table.appendChild(thead);

                // Table body
                const tbody = document.createElement('tbody');
                categoryData.prompts.forEach(prompt => {
                    const row = document.createElement('tr');

                    // Prompt cell
                    const promptCell = document.createElement('td');
                    promptCell.className = 'prompt-cell';
                    promptCell.textContent = prompt.question;
                    row.appendChild(promptCell);

                    // Response cells
                    llms.forEach(llm => {
                        const responseCell = document.createElement('td');
                        responseCell.className = 'llm-response';
                        responseCell.textContent = prompt.responses[llm] || '';
                        row.appendChild(responseCell);
                    });

                    tbody.appendChild(row);
                });

                table.appendChild(tbody);
                tableContainer.appendChild(table);

                section.appendChild(header);
                section.appendChild(stats);
                section.appendChild(tableContainer);
                mainContent.appendChild(section);
            });
        }

        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            const clearButton = document.getElementById('clearSearch');

            searchInput.addEventListener('input', (e) => {
                searchTerm = e.target.value.trim();
                highlightMatches(Array.from(activeBrands));
            });

            clearButton.addEventListener('click', () => {
                searchInput.value = '';
                searchTerm = '';
                highlightMatches(Array.from(activeBrands));
            });
        }

        function init() {
            renderTables();
            buildBrandBar();
            setupSearch();
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
